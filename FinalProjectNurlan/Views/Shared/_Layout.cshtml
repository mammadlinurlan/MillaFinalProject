@inject FinalProjectNurlan.Services.LayoutService layoutService
<!DOCTYPE html>
<html lang="en">



<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Final Project</title>
    <meta name="keywords" content="HTML5 Template">
    <meta name="description" content="Final Project">
    <meta name="author" content="p-themes">
   
    <link rel="apple-touch-icon" sizes="180x180" href="~/assets/images/icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="~/assets/images/icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="~/assets/images/icons/favicon-16x16.png">
    <link rel="manifest" href="~/assets/images/icons/site.html">
    <link rel="mask-icon" href="~/assets/images/icons/safari-pinned-tab.svg" color="#666666">
    <link rel="shortcut icon" href="~/assets/images/icons/favicon.ico">
    <meta name="apple-mobile-web-app-title" content="Molla">
    <meta name="application-name" content="Molla">
    <meta name="msapplication-TileColor" content="#cc9966">
    <meta name="msapplication-config" content="~/assets/images/icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <link rel="stylesheet" href="~/assets/vendor/line-awesome/line-awesome/line-awesome/css/line-awesome.min.css">
     
    <link rel="stylesheet" href="~/assets/css/bootstrap.min.css">
    <link rel="stylesheet" href="~/assets/css/plugins/owl-carousel/owl.carousel.css">
    <link rel="stylesheet" href="~/assets/css/plugins/magnific-popup/magnific-popup.css">
    <link rel="stylesheet" href="~/assets/css/plugins/jquery.countdown.css">

     
    <link rel="stylesheet" href="~/assets/css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" integrity="sha512-KfkfwYDsLkIlwQp6LFnl8zNdLGxu9YAA1QvwINks4PhcElQSvqcyVLLD9aMhXd13uQjoXtEKNosOWaZqXgel0g==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="~/assets/css/skins/skin-demo-6.css">
    <link rel="stylesheet" href="~/assets/css/demos/demo-6.css">
    <link rel="stylesheet" href="~/assets/css/plugins/nouislider/nouislider.css" />
    <link rel="stylesheet" href="~/assets/css/image-zoom.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.css" integrity="sha512-3pIirOrwegjM6erE5gPSwkUzO+3cTjpnV9lexlNZqvupR64iZBnOOTiiLPb9M36zpMScbmUNIcHUqKD47M719g==" crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>





<body>
    <div class="page-wrapper">
        <header class="header">
            <div class="header-top">
                <div class="container">
                    <div class="header-left">
                        <div class="header-dropdown">
                            <a href="#">Usd</a>
                            <div class="header-menu">
                                <ul>
                                    <li><a href="#">Eur</a></li>
                                    <li><a href="#">Usd</a></li>
                                </ul>
                            </div>
                        </div>

                        <div class="header-dropdown">
                            <a href="#">Eng</a>
                            <div class="header-menu">
                                <ul>
                                    <li><a href="#">English</a></li>
                                    <li><a href="#">French</a></li>
                                    <li><a href="#">Spanish</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div class="header-right">
                        <ul class="top-menu">
                            <li>
                                <a href="#">Links</a>
                                <ul>
                                    <li><a href="tel:#"><i class="@layoutService.getSettingDatas().PhoneIcon"></i>Call: @layoutService.getSettingDatas().Phone</a></li>
                                    <li><a asp-controller="wishlist" asp-action="index"><i class="@layoutService.getSettingDatas().LittleWishlist"></i>Wishlist <span>(3)</span></a></li>

                                    @if (!User.Identity.IsAuthenticated)
                                    {
                                        <li><a asp-controller="account" asp-action="login"><i class="@layoutService.getSettingDatas().UserIcon"></i>Login</a></li>


                                    }
                                    else
                                    {
                                        <li><a asp-controller="account" asp-action="edit">@User.Identity.Name</a></li>
                                        <li><a asp-controller="account" asp-action="logout">Logout</a></li>

                                    }

                                </ul>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="header-middle sticky-header">
                <div class="container">
                    <div class="header-left">
                        <button style="color:black" class="mobile-menu-toggler">
                            <span class="sr-only">Toggle mobile menu</span>
                            <i class="icon-bars"></i>
                        </button>

                        <a asp-controller="home" asp-action="index" class="logo">
                            <img src="~/assets/images/video/@layoutService.getSettingDatas().HeaderLogoImage" alt="Molla Logo" width="105" height="25">
                        </a>

                        <nav class="main-nav">
                            <ul class="menu sf-arrows">
                                <li>
                                    <a asp-controller="home" asp-action="index">Home</a>


                                </li>
                                <li>
                                    <a asp-controller="man" asp-action="index">Man</a>


                                </li>
                                <li>
                                    <a asp-controller="woman" asp-action="index">Woman</a>


                                </li>
                                <li>
                                    <a asp-controller="contact" asp-action="index">Contact us</a>
                                </li>
                                <li>
                                    <a asp-controller="blog" asp-action="index">Blog</a>
                                </li>
                                <li>
                                    <a asp-controller="about" asp-action="index">About us</a>
                                </li>
                            </ul>
                        </nav>
                    </div>

                    <div class="header-right">
                        <div class="header-search">
                            <a href="#" class="search-toggle" role="button" title="Search"><i class="@layoutService.getSettingDatas().SearchIcon"></i></a>
                            <form action="#" method="get">
                                <div class="header-search-wrapper">
                                    <label for="q" class="sr-only">Search</label>
                                    <input autocomplete="off" type="search" class="form-control search-input" name="q" id="q" placeholder="Search in..." required>
                                </div>


                            </form>
                            <div style="background-color:white;border-top:none;border-bottom-left-radius:5px;border-bottom-right-radius:5px;border: 1px #a4b0be solid; max-height: 275px !important; position: absolute; top: 65px; z-index: 1000000; right: -18px; width: max-content; box-shadow: 11px 13px 17px 0px rgba(0,0,0,0.75); -webkit-box-shadow: 11px 13px 17px 0px rgba(0,0,0,0.75); -moz-box-shadow: 11px 13px 17px 0px rgba(0,0,0,0.75);" class="searchProducts">
                               
                            </div>

                        </div>
                        <div class="dropdown compare-dropdown">
                            <a href="#" class="dropdown-toggle" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" data-display="static" title="Compare Products" aria-label="Compare Products">
                                <i class="@layoutService.getSettingDatas().WishlistIcon"></i>

                            </a>

                            <div class="dropdown-menu dropdown-menu-right">
                                <ul class="compare-products">
                                    <li class="compare-product">
                                        <a href="#" class="btn-remove" title="Remove Product"><i class="icon-close"></i></a>
                                        <h4 class="compare-product-title"><a href="product.html">Blue Night Dress</a></h4>
                                    </li>
                                    <li class="compare-product">
                                        <a href="#" class="btn-remove" title="Remove Product"><i class="icon-close"></i></a>
                                        <h4 class="compare-product-title"><a href="product.html">White Long Skirt</a></h4>
                                    </li>
                                </ul>

                                <div class="compare-actions">
                                    <a href="#" class="action-link">Clear All</a>
                                    <a href="#" class="btn btn-outline-primary-2"><span>Compare</span><i class="icon-long-arrow-right"></i></a>
                                </div>
                            </div>
                        </div>

                        <div class="dropdown cart-dropdown">
                            <a href="#" class="dropdown-toggle" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" data-display="static">
                                <i class="@layoutService.getSettingDatas().BasketIcon"></i>
                                <span class="cart-count">@layoutService.ShowBasket().Result.Count</span>
                            </a>

                            <div class="dropdown-menu dropdown-menu-right">
                           
                                <div style="max-height:220px!important;overflow-y:scroll!important" class="dropdown-cart-products">
                                   
                                    @await Html.PartialAsync("_basketProductPartialView",layoutService)

                                </div>

                                <div class="dropdown-cart-total">
                                    <span>Total</span>

                                    <span class="cart-total-price">$@String.Format("{0:0.00}", @layoutService.ShowBasket().Result.TotalPrice)     </span>
                                </div>

                                <div class="dropdown-cart-action">
                                    <a asp-controller="order" asp-action="cart" class="btn btn-primary">View Cart</a>
                                    <a asp-controller="order" asp-action="checkout" class="btn btn-outline-primary-2"><span>Checkout</span><i class="icon-long-arrow-right"></i></a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </header>



        <main>@RenderBody()</main>

        <footer>


            <div class="footer-middle">
                <div class="container">
                    <div class="row">
                        <div class="col-sm-6 col-lg-3">
                            <div class="widget widget-about">
                                <img src="~/assets/images/video/@layoutService.getSettingDatas().FooterLogoImage" class="footer-logo" alt="Footer Logo" width="105" height="25">
                                <p>Praesent dapibus, neque id cursus ucibus, tortor neque egestas augue, eu vulputate magna eros eu erat. </p>

                                <div class="social-icons">
                                    <a href="@layoutService.getSettingDatas().FbLink" class="social-icon" target="_blank" title="Facebook"><i class="@layoutService.getSettingDatas().FbIcon"></i></a>
                                    <a href="@layoutService.getSettingDatas().TwitLink" class="social-icon" target="_blank" title="Twitter"><i class="@layoutService.getSettingDatas().TwitIcon"></i></a>
                                    <a href="@layoutService.getSettingDatas().InstaLink" class="social-icon" target="_blank" title="Instagram"><i class="@layoutService.getSettingDatas().InstaIcon"></i></a>
                                    <a href="@layoutService.getSettingDatas().YtLink" class="social-icon" target="_blank" title="Youtube"><i class="@layoutService.getSettingDatas().YoutubeIcon"></i></a>
                                    <a href="@layoutService.getSettingDatas().PinterestLink" class="social-icon" target="_blank" title="Pinterest"><i class="@layoutService.getSettingDatas().PinterestIcon"></i></a>
                                </div>
                            </div>
                        </div>

                        <div class="col-sm-6 col-lg-3">
                            <div class="widget">
                                <h4 class="widget-title">Useful Links</h4>

                                <ul class="widget-list">
                                    <li><a href="#">About Molla</a></li>
                                    <li><a href="#">How to shop on Molla</a></li>
                                    <li><a href="#">FAQ</a></li>
                                    <li><a asp-controller="contact" asp-action="index">Contact us</a></li>
                                    <li><a asp-controller="account" asp-action="login">Log in</a></li>
                                </ul>
                            </div>
                        </div>

                        <div class="col-sm-6 col-lg-3">
                            <div class="widget">
                                <h4 class="widget-title">Customer Service</h4>

                                <ul class="widget-list">
                                    <li><a href="#">Payment Methods</a></li>
                                    <li><a href="#">Money-back guarantee!</a></li>
                                    <li><a href="#">Returns</a></li>
                                    <li><a href="#">Shipping</a></li>
                                    <li><a href="#">Terms and conditions</a></li>
                                    <li><a href="#">Privacy Policy</a></li>
                                </ul>
                            </div>
                        </div>

                        <div class="col-sm-6 col-lg-3">
                            <div class="widget">
                                <h4 class="widget-title">My Account</h4>

                                <ul class="widget-list">
                                    <li><a asp-controller="account" asp-action="login">Sign In</a></li>
                                    <li><a asp-controller="order" asp-action="cart">View Cart</a></li>
                                    <li><a asp-controller="wishlist" asp-action="index">My Wishlist</a></li>
                                    <li><a href="#">Track My Order</a></li>
                                    <li><a href="#">Help</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="footer-bottom">
                <div class="container">
                    <p class="footer-copyright">@layoutService.getSettingDatas().Copyright</p>
                    <figure class="footer-payments">
                        <img src="~/assets/images/payments.png" alt="Payment methods" width="272" height="20">
                    </figure>
                </div>
            </div>
        </footer>
    </div>
    <button id="scroll-top" title="Back to Top"><i class="icon-arrow-up"></i></button>

   
    <div class="mobile-menu-overlay"></div>

    <div class="mobile-menu-container">
        <div class="mobile-menu-wrapper">
            <span class="mobile-menu-close"><i class="icon-close"></i></span>

            <form action="#" method="get" class="mobile-search">
                <label for="mobile-search" class="sr-only">Search</label>
                <input type="search" class="form-control" name="mobile-search" id="mobile-search" placeholder="Search in..." required="">
                <button class="btn btn-primary" type="submit"><i class="@layoutService.getSettingDatas().SearchIcon"></i></button>
            </form>

            <nav class="mobile-nav">
                <ul class="mobile-menu">
                    <li class="active">
                        <a style="color:white !important" asp-controller="home" asp-action="index">Home<span class="mmenu-btn"></span></a>


                    </li>

                    <li><a asp-controller="man" asp-action="index">Men</a></li>
                    <li><a asp-controller="woman" asp-action="index">Women</a></li>

                    <li><a asp-controller="about" asp-action="index">About us</a></li>
                    <li><a asp-controller="contact" asp-action="index">Contact us</a></li>
                    <li><a asp-controller="blog" asp-action="index">Blog</a></li>


                </ul>
            </nav>

            <div class="social-icons">
                <a href="@layoutService.getSettingDatas().FbLink" class="social-icon" target="_blank" title="Facebook"><i class="@layoutService.getSettingDatas().FbIcon"></i></a>
                <a href="@layoutService.getSettingDatas().TwitLink" class="social-icon" target="_blank" title="Twitter"><i class="@layoutService.getSettingDatas().TwitIcon"></i></a>
                <a href="@layoutService.getSettingDatas().InstaLink" class="social-icon" target="_blank" title="Instagram"><i class="@layoutService.getSettingDatas().InstaIcon"></i></a>
                <a href="@layoutService.getSettingDatas().YtLink" class="social-icon" target="_blank" title="Youtube"><i class="@layoutService.getSettingDatas().YoutubeIcon"></i></a>
            </div>
        </div>
    </div>
    
    
    <script src="~/assets/js/jquery.min.js"></script>
    <script src="~/assets/js/bootstrap.bundle.min.js"></script>
    <script src="~/assets/js/jquery.hoverIntent.min.js"></script>
    <script src="~/assets/js/jquery.waypoints.min.js"></script>
    <script src="~/assets/js/superfish.min.js"></script>
    <script src="~/assets/js/owl.carousel.min.js"></script>
    <script src="~/assets/js/wNumb.js"></script>
    <script src="~/assets/js/bootstrap-input-spinner.js"></script>
    <script src="~/assets/js/jquery.magnific-popup.min.js"></script>
    <script src="~/assets/js/nouislider.min.js"></script>
    <script src="~/assets/js/jquery.elevateZoom.min.js"></script>
    <script src="~/assets/js/image-zoom.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js" integrity="sha512-VEd+nq25CkR676O+pLBnDW09R7VQX9Mdiij052gVCp5yVH3jGtH70Ho/UUv4mJDsEdTvqRCFZg0NKGiojGnUCw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  
    <script src="~/assets/js/main.js"></script>
    <script>




        $(".forSizeId").val()

        $(document).on("change", "#size", function (e) {
            //console.log(e.target.value)
            $(".forSizeId").val(e.target.value)
            console.log($(".forSizeId").val())
            //console.log($(".forSizeId").val())
        })

        $(document).on("change", ".qtyforme", function (e) {
            $(".forCount").val(e.target.value)
        })


        $(document).on("click", ".add-to-cart", function (e) {

            e.preventDefault();
            $(this).css("background-color", "white")
            $(this).css("color", "#c94")
            $(".add-to-cart span").css("color","#c94f")

            var sizeId = $(".forSizeId").val();
            var colorId = $(".forColorId").val();
            var productId = $(".forProductId").val();
            var link = $(this).attr("href")
            var uruuul = window.location.origin;
            console.log(link)
            var quantity = $(".forCount").val();
            if (!quantity) {
                quantity = 1;
            }
           
            var url = uruuul + '/Basket/SetBasket' + '?sizeId=' + sizeId + '&colorId=' + colorId + '&productId=' + productId + '&quantity=' + quantity
            var urlstrt = window.location.origin;
            var urlforcount = `${urlstrt}/Basket/ForTotalCount`
            var urlforpartial = `${urlstrt}/Basket/GetPartial`
            var urlforprice = `${urlstrt}/Basket/GetTotalPrice`
            console.log(url)
            console.log(urlforcount);
            if (sizeId == 0) {
                Command: toastr["error"]("Select a size!")

                toastr.options = {
                    "closeButton": false,
                    "debug": false,
                    "newestOnTop": false,
                    "progressBar": true,
                    "positionClass": "toast-bottom-center",
                    "preventDuplicates": false,
                    "onclick": null,
                    "showDuration": "300",
                    "hideDuration": "1000",
                    "timeOut": "5000",
                    "extendedTimeOut": "1000",
                    "showEasing": "swing",
                    "hideEasing": "linear",
                    "showMethod": "fadeIn",
                    "hideMethod": "fadeOut"
                }
            }
            else {

                fetch(url).then(res => res.text()).then(data => {
                    //console.log(data)
                    //$(".dropdown-cart-products").empty();
                    //$(".dropdown-cart-products").append(data);
                    Command: toastr["success"]("Successfully added to basket!")
                    toastr.options = {
                        "closeButton": false,
                        "debug": false,
                        "newestOnTop": false,
                        "progressBar": true,
                        "positionClass": "toast-bottom-center",
                        "preventDuplicates": false,
                        "onclick": null,
                        "showDuration": "300",
                        "hideDuration": "1000",
                        "timeOut": "5000",
                        "extendedTimeOut": "1000",
                        "showEasing": "swing",
                        "hideEasing": "linear",
                        "showMethod": "fadeIn",
                        "hideMethod": "fadeOut"
                    }

                    fetch(urlforcount).then(res => res.text()).then(data => {

                        $(".cart-count").empty();
                        $(".cart-count").append(data);

                    })
                    fetch(urlforpartial).then(res => res.text()).then(data => {

                        $(".dropdown-cart-products").empty();
                        $(".dropdown-cart-products").append(data);

                    })
                    fetch(urlforprice).then(res => res.text()).then(data => {

                        $(".cart-total-price").empty();
                        var monet = parseFloat(data).toFixed(2)
                        $(".cart-total-price").append(`$${monet}`);
                      

                    })



                })


            }



            //console.log(`colorId : ${colorId}   --- sizeId : ${sizeId} --- prodId ${productId}  --- count : ${count} `)

        })


        $(document).on("click", ".btn-remove", function (e) {
            
            e.preventDefault();
            var linkk = $(this).attr("href");
            var base = window.location.origin
            //var prodid = $(".hiddenProdId").val();
            console.log(`${base}${linkk}`)
            var comp = `${base}${linkk}`



            var urlstrt = window.location.origin;
            var urlforcount = `${urlstrt}/Basket/ForTotalCount`
            var urlforpartial = `${urlstrt}/Basket/GetPartial`
            var urlforprice = `${urlstrt}/Basket/GetTotalPrice`


            fetch(comp).then(res => res.text()).then(data => {
                console.log(data)


                fetch(urlforcount).then(res => res.text()).then(data => {

                    $(".cart-count").empty();
                    $(".cart-count").append(data);

                })
                fetch(urlforpartial).then(res => res.text()).then(data => {

                    $(".dropdown-cart-products").empty();
                    $(".dropdown-cart-products").append(data);

                })
                fetch(urlforprice).then(res => res.text()).then(data => {

                    $(".cart-total-price").empty();
                    var monet = parseFloat(data).toFixed(2)
                    $(".cart-total-price").append(`$${monet}`);

                })
            })
        })

        $(document).on("click", "#2col", function (e) {
            e.preventDefault();
            $(".btn-layout").not(this).removeClass("active");
            $(this).addClass("active")
            $(".productClass").removeClass("col-lg-4");
            $(".productClass").addClass("col-lg-6");
            $(".productClass").removeClass("col-md-4");
            $(".productClass").addClass("col-md-6");
            $(".product-main").css("height","430px")
           
        })
        $(document).on("click", "#3col", function (e) {
            e.preventDefault();
            $(".btn-layout").not(this).removeClass("active");
            $(this).addClass("active")
            $(".productClass").removeClass("col-lg-6");
            $(".productClass").addClass("col-lg-4");
            $(".productClass").removeClass("col-md-6");
            $(".productClass").addClass("col-md-4");
            $(".product-main").css("height", "353px")

           
        })

        if (!$(".search-toggle").hasClass("active")) {

            $(".search-input").val('')
            $(".searchProducts").empty()
            console.log("sa")
        }

        $(document).on("click", function () {
            if (!$(".search-toggle").hasClass("active")) {

                $(".search-input").val('')
                $(".searchProducts").empty()
               
            }
        })

        $(document).on("keyup", ".search-input", function () {

            var text = $(this).val()
            var base = window.location.origin;
            var fetchUrl = `${base}/search/SearchPartial?word=${text}`
            console.log(fetchUrl)

           

            if (text.length >= 3) {

                fetch(fetchUrl).then(res => res.text()).then(data => {

                    $(".searchProducts").empty();
                    $(".searchProducts").append(data);


                })

            }
            if (text.length < 3) {
                $(".searchProducts").empty()
            }
        })


    </script>
    @RenderSection("Scripts", required: false)

</body>


<!-- molla/category-list.html  22 Nov 2019 10:02:52 GMT -->
</html>
