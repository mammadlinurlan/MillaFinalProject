@model ShopVM
<main class="main">
    <div class="page-header text-center" style="background-image: url('~/assets/images/page-header-bg.jpg')">
        <div class="container">
            <h1 class="page-title">List<span>Shop</span></h1>
        </div><!-- End .container -->
    </div><!-- End .page-header -->
    <nav aria-label="breadcrumb" class="breadcrumb-nav mb-2">
        <div class="container">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a asp-controller="man" asp-action="index">Man</a></li>

                <li class="breadcrumb-item active" aria-current="page">@Model.Category.Name</li>
            </ol>
        </div><!-- End .container -->
    </nav><!-- End .breadcrumb-nav -->

    <div class="page-content">
        <div class="container">
            <div class="row">
                <div class="col-lg-9">
                    <div class="toolbox">
                        

                        <div class="toolbox-right">
                            <div class="toolbox-sort">
                                <label for="sortby">Sort by:</label>
                                <div class="select-custom">
                                    <select name="sortby" id="sortby" class="form-control">
                                        <option value="newest" selected="selected">Newest</option>
                                        <option value="lowtohigh">Price : Low - High</option>
                                        <option value="hightolow">Price : High - Low</option>
                                        <option value="atoz">Name : A - Z</option>
                                        <option value="ztoa">Name : Z - A</option>


                                    </select>
                                </div>
                            </div>
                            <div class="toolbox-layout">
                             

                                <a href="#" id="2col" class="btn-layout">
                                    <svg width="10" height="10">
                                        <rect x="0" y="0" width="4" height="4" />
                                        <rect x="6" y="0" width="4" height="4" />
                                        <rect x="0" y="6" width="4" height="4" />
                                        <rect x="6" y="6" width="4" height="4" />
                                    </svg>
                                </a>

                                <a href="#" id="3col" class="btn-layout active">
                                    <svg width="16" height="10">
                                        <rect x="0" y="0" width="4" height="4" />
                                        <rect x="6" y="0" width="4" height="4" />
                                        <rect x="12" y="0" width="4" height="4" />
                                        <rect x="0" y="6" width="4" height="4" />
                                        <rect x="6" y="6" width="4" height="4" />
                                        <rect x="12" y="6" width="4" height="4" />
                                    </svg>
                                </a>

                               
                            </div>
                        </div>
                    </div>

                    <div class="products mb-3">
                        <div class="row">

                            @await Html.PartialAsync("_productPartialView", Model)

                        </div>
                    </div>





                    <nav aria-label="Page navigation">
                        <ul class="pagination justify-content-center">
                            @*<li class="page-item @(ViewBag.Currentpage == 1 ? "disabled" : "")">
                                    <a class="page-link page-link-prev" asp-controller="man" asp-action="shop" asp-route-page="@(ViewBag.CurrentPage-1)" aria-label="Previous" tabindex="-1" aria-disabled="true">
                                        <span aria-hidden="true"><i class="icon-long-arrow-left"></i></span>Prev
                                    </a>
                                </li>

                                @for (int i = 1; i <= ViewBag.TotalPage; i++)
                                {
                                    <li class="page-item  @(ViewBag.CurrentPage == i ? "active" : "")"  style="pointer-events: @(ViewBag.CurrentPage == i ? "none" : "")" ><a class="page-link" asp-controller="man" asp-action="shop" asp-route-page="@i">@i</a></li>

                                }



                                <li class="page-item @(ViewBag.CurrentPage == ViewBag.TotalPage ? "disabled" : "")">
                                    <a class="page-link page-link-next" asp-controller="man" asp-action="shop" asp-route-page="@(ViewBag.CurrentPage +1)" aria-label="Next">
                                        Next <span aria-hidden="true"><i class="icon-long-arrow-right"></i></span>
                                    </a>
                                </li>*@



                            <a href="#" id="loadMore" style="max-width: 18%; background-color: #c96; color: white;" class="btn-product">
                                Load more
                            </a>



                        </ul>
                    </nav>
                </div><!-- End .col-lg-9 -->

                <aside class="col-lg-3 order-lg-first">
                    <div class="sidebar sidebar-shop">
                        <div class="widget widget-clean">
                            <label>Filters:</label>
                            <a href="#" class="clear-filters">Clean All</a>
                        </div><!-- End .widget widget-clean -->

                        <div class="widget widget-collapsible">
                            <h3 class="widget-title">
                                <a data-toggle="collapse" href="#widget-1" role="button" aria-expanded="true" aria-controls="widget-1">
                                    Category
                                </a>
                            </h3><!-- End .widget-title -->

                            <div class="collapse show" id="widget-1">
                                <div class="widget-body">
                                    <div class="filter-items filter-items-count">
                                        @foreach (var item in Model.Category.SubCategories)
                                        {
                                            <div class="filter-item category-item">
                                                <div class="custom-control custom-checkbox">
                                                    <input value="@item.Id" type="checkbox" class="custom-control-input categoryCheck" id="@item.Id">
                                                    <label class="custom-control-label">@item.Name</label>
                                                </div>
                                            </div>
                                        }

                                        <!-- End .filter-item -->
                                    </div><!-- End .filter-items -->
                                </div><!-- End .widget-body -->
                            </div><!-- End .collapse -->
                        </div><!-- End .widget -->





                        <div class="widget widget-collapsible">
                            <h3 class="widget-title">
                                <a data-toggle="collapse" href="#widget-2" role="button" aria-expanded="true" aria-controls="widget-2">
                                    Size
                                </a>
                            </h3><!-- End .widget-title -->

                            <div class="collapse show" id="widget-2">
                                <div class="widget-body">
                                    <div class="filter-items">
                                        @for (int i = 0; i < 6; i++)
                                        {
                                            <div  class="filter-item size-item">
                                                <div class="custom-control custom-checkbox">

                                                    <input value="@ViewBag.Sizes[i].Id" type="checkbox" class="custom-control-input" id="@ViewBag.Sizes[i].Name">
                                                    <label class="custom-control-label">@ViewBag.Sizes[i].Name</label>

                                                </div>
                                            </div>
                                        }


                                        @*@foreach (var item in ViewBag.Sizes)
                                            {
                                                <div class="filter-item">
                                                    <div class="custom-control custom-checkbox">

                                                        <input type="checkbox" class="custom-control-input" id="@item.Id">
                                                        <label class="custom-control-label" for="@item.Id">@item.Name</label>

                                                    </div>
                                                </div>
                                            }*@


                                    </div><!-- End .filter-items -->
                                </div><!-- End .widget-body -->
                            </div><!-- End .collapse -->
                        </div><!-- End .widget -->

                        <div class="widget widget-collapsible">
                            <h3 class="widget-title">
                                <a data-toggle="collapse" href="#widget-3" role="button" aria-expanded="true" aria-controls="widget-3">
                                    Colour
                                </a>
                            </h3><!-- End .widget-title -->

                            <div class="collapse show" id="widget-3">
                                <div class="widget-body">
                                    <div class="filter-colors">
                                        @foreach (var item in ViewBag.Colors)
                                        {
                                            <a class="colorClick" href="#" style="background: @item.Name;"><span class="sr-only">@item.Name</span></a>
                                            <input hidden value="@item.Id" />
                                        }

                                    </div><!-- End .filter-colors -->
                                </div><!-- End .widget-body -->
                            </div><!-- End .collapse -->
                        </div><!-- End .widget -->

                        <div class="widget widget-collapsible">
                            <h3 class="widget-title">
                                <a data-toggle="collapse" href="#widget-4" role="button" aria-expanded="true" aria-controls="widget-4">
                                    Brand
                                </a>
                            </h3><!-- End .widget-title -->

                            <div class="collapse show" id="widget-4">
                                <div class="widget-body">
                                    <div class="filter-items">

                                        @foreach (Brand item in Model.Brands)
                                        {
                                            <div class="filter-item brand-item">
                                                <div class="custom-control custom-checkbox">
                                                    <input value="@item.Id" type="checkbox" class="custom-control-input filtercheck" id="@item.Id">
                                                    <label class="custom-control-label">@System.Globalization.CultureInfo.CurrentCulture.TextInfo.ToTitleCase(item.Name.ToLower())</label>
                                                </div>
                                            </div>
                                        }




                                    </div><!-- End .filter-items -->
                                </div><!-- End .widget-body -->
                            </div><!-- End .collapse -->
                        </div><!-- End .widget -->

                        <div class="widget widget-collapsible">
                            <h3 class="widget-title">
                                <a data-toggle="collapse" href="#widget-5" role="button" aria-expanded="true" aria-controls="widget-5">
                                    Price
                                </a>
                            </h3><!-- End .widget-title -->

                            <div class="collapse show" id="widget-5">
                                <div class="widget-body">
                                    <div class="filter-price">
                                        <div class="filter-price-text">
                                            Price Range:
                                            <span id="filter-price-range">$0 - $750</span>
                                        </div>
                                        <div id="price-slider" class="noUi-target noUi-ltr noUi-horizontal"><div class="noUi-base"><div class="noUi-connects"><div class="noUi-connect" style="transform: translate(0%, 0px) scale(0.75, 1);"></div></div><div class="noUi-origin" style="transform: translate(-100%, 0px); z-index: 5;"><div class="noUi-handle noUi-handle-lower" data-handle="0" tabindex="0" role="slider" aria-orientation="horizontal" aria-valuemin="0.0" aria-valuemax="550.0" aria-valuenow="0.0" aria-valuetext="$0"><div class="noUi-touch-area"></div><div class="noUi-tooltip">$0</div></div></div><div class="noUi-origin" style="transform: translate(-25%, 0px); z-index: 4;"><div class="noUi-handle noUi-handle-upper" data-handle="1" tabindex="0" role="slider" aria-orientation="horizontal" aria-valuemin="200.0" aria-valuemax="1000.0" aria-valuenow="750.0" aria-valuetext="$750"><div class="noUi-touch-area"></div><div class="noUi-tooltip">$750</div></div></div></div></div><!-- End #price-slider -->


                                    </div><!-- End .filter-price -->
                                </div><!-- End .widget-body -->
                            </div><!-- End .collapse -->
                        </div>
                    </div><!-- End .sidebar sidebar-shop -->
                </aside><!-- End .col-lg-3 -->
            </div><!-- End .row -->
        </div><!-- End .container -->
    </div><!-- End .page-content -->
</main><!-- End .main -->

@section Scripts{
    <script>
        $(document).ready(function () {
            $("#price-slider").children().first().remove()


            $(".productClass").slice(0, 6).show()

            $("#loadMore").click(function (e) {

                e.preventDefault();
                $(".productClass:hidden").slice(0, 6).show()
                if ($(".productClass:hidden").length == 0) {
                    $("#loadMore").fadeOut()
                }
            })



            $(".colorClick").click(function (e) {
                e.preventDefault();
                $(this).toggleClass("selected")
                //console.log("clicked");
            })



            $(".product-notMain").click(function (e) {
                console.log("sa")
                e.preventDefault();
                var parent = $(this).closest(".product-body").prev().children(".until").children(".product-main")
                var newHref = $(this).attr("href")
                $(parent).closest(".until").removeAttr("href").attr("href", newHref)
                var closestNav = $(this).closest(".product-nav");
                $(closestNav.children(".product-notMain")).not(this).removeClass("active");

                $(this).addClass("active")
                var notmain = $(this).children(".nmSrc").attr("src")
                $(parent).attr("src", notmain)

            })

            $(".sizeClick").click(function (e) {
                e.preventDefault();
                $(this).closest(".product-size").children(".sizeClick").not(this).removeClass("active")
                $(this).addClass("active")
            })


            $(".size-item").click(function () {


                if ($(this).children().children().first().attr("checked")) {
                    $(this).children().children().first().removeAttr("checked")
                } else {
                    $(this).children().children().first().attr("checked", "")

                }

                
            })

            $(".brand-item").click(function () {


                if ($(this).children().children().first().attr("checked")) {
                    $(this).children().children().first().removeAttr("checked")
                } else {
                    $(this).children().children().first().attr("checked", "")

                }


            })
            $(".category-item").click(function () {


                if ($(this).children().children().first().attr("checked")) {
                    $(this).children().children().first().removeAttr("checked")
                } else {
                    $(this).children().children().first().attr("checked", "")

                }


            })

            $(".clear-filters").click(function (e) {
                e.preventDefault();
                $(".custom-control-input").removeAttr("checked")
                $(".colorClick").removeClass("selected")
                //.removeAttr("checked")

            })



        })
    </script>
}